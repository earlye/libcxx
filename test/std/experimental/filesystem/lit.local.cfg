# Disable all of the filesystem tests if the correct feature is not available.
if 'c++filesystem' not in config.available_features:
  config.unsupported = True
else:
  import copy
  config.test_format.cxx = copy.deepcopy(config.test_format.cxx)
  config.test_format.cxx.compile_flags += ['-DTEST_INCLUDE_EXPERIMENTAL_FILESYSTEM']
  if any(std in config.available_features for std in ['c++03', 'c++98']):
    config.available_features.add('filesystem-std-unsupported')
